/**
 * Copyright (c) 2014, 2016, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,f){(function(){function b(b,c,d){a:{for(var e=r[b],f=0;f<e.length;++f){var g=e[f];if(0<=d.indexOf(g))for(;;c=c.parentNode){var h=a.Components.Tf(c,g);if(h){d=h;break a}}}d=null}return d?d("option","chroming"):a.Ee.Yk(b).chroming}function d(b,a){var c=b.name,d=b.form;c?(c=c.replace(/'/g,"\\'"),c=":radio[name\x3d'"+c+"']:oj-button",d=a?a.filter(c):d?f(d).find(c):f(c,b.ownerDocument).filter(function(){return!this.form})):d=(a?a.filter(b):
f(b)).filter(":oj-button");return d}function c(b,a){b.removeClass(n).addClass(p[a])}a.ya("oj.ojButton",f.oj.baseComponent,{defaultElement:"\x3cbutton\x3e",widgetEventPrefix:"oj",options:{chroming:"full",disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null},ae:function(b,a){this._super(b,a);this.Oga();"disabled"in a||this.option("disabled",!!this.element.prop("disabled"),{_context:{Wa:!0}});"label"in a||(this.Mpa=!0,this.option("label","inputPush"===this.type?this.Bd.val():this.Bd.html(),
{_context:{Wa:!0}}));!this.options.menu||a.icons&&void 0!==a.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{Hc:!0,Wa:!0}})},_ComponentCreate:function(){function b(){a.FK=Date.now();a.wb.removeClass(l);a.wb.removeClass("oj-hover");a.Nh()}this._super();this.element.closest("form").unbind("reset"+h).bind("reset"+h,function(){var b=f(this);setTimeout(function(){b.find(":oj-button").each(function(){f(this).data("oj-ojButton").GA(!1)}).length||b.unbind("reset"+
h)},1)});this.gz=this.eventNamespace+"menu";this.Pga();this.aO=!!this.wb.attr("title");var a=this,d=this.jx,l=d?"":"oj-active";this.wb.addClass(k);c(this.wb,this.options.chroming);this.document.bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,b);this.Bd.bind("touchstart"+this.eventNamespace,function(){a.be()||(f(this).addClass(l),a.Nh())}).bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,b).bind("mouseenter"+this.eventNamespace,function(){a.be()||a.Mx()||
(this===e&&a.wb.addClass("oj-active"),a.wb.addClass("oj-hover").removeClass("oj-default oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){a.wb.removeClass("oj-hover");a.be()||(a.wb.removeClass(l),a.Nh())}).bind("click"+this.eventNamespace,function(b){a.be()&&(b.preventDefault(),b.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){a.wb.addClass("oj-focus");a.Nh()}).bind("blur"+this.eventNamespace,function(){a.wb.removeClass("oj-focus");a.Nh()});
d&&(this.element.bind("change"+this.eventNamespace,function(b){a.GA(!0);var c=f(this).closest(":oj-buttonset").data("oj-ojButtonset"),d=c&&c.YV(c.Fd);c&&void 0!==d&&c.option("checked",d,{_context:{Hc:!0,originalEvent:b,Wa:!0}})}),this.Bd.bind("mousedown"+this.eventNamespace,function(){a.be()||(g=this,a.document.one("mouseup",function(){g=null}))}).bind("mouseup"+this.eventNamespace,function(){a.be()||this!==g||a.element.focus()}));"checkbox"===this.type?(this.Bd.bind("click"+this.eventNamespace,function(){if(a.be())return!1}),
this.element.bind("keyup"+this.eventNamespace,function(b){b.keyCode===f.ui.keyCode.ENTER&&(a.be()||a.element.click())})):"radio"===this.type?(this.Bd.bind("click"+this.eventNamespace,function(){if(a.be())return!1}),this.element.bind("keyup"+this.eventNamespace,function(b){b.keyCode!==f.ui.keyCode.ENTER||a.element[0].checked||a.be()||(a.element[0].checked=!0,a.element.change(),a.element.click())})):(this.Bd.bind("mousedown"+this.eventNamespace,function(b){if(a.be())return!1;1!==b.which||a.Mx()||(f(this).addClass("oj-active").removeClass("oj-default oj-focus-only"),
e=this,a.document.one("mouseup",function(){e=null}))}).bind("mouseup"+this.eventNamespace,function(){if(a.be())return!1;f(this).removeClass("oj-active");a.Nh()}).bind("keydown"+this.eventNamespace,function(b){if(a.be())return!1;var c=b.keyCode===f.ui.keyCode.SPACE,d="anchor"===a.type;d&&c&&b.preventDefault();(c&&!d||b.keyCode===f.ui.keyCode.ENTER)&&f(this).addClass("oj-active").removeClass("oj-default oj-focus-only")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){f(this).removeClass("oj-active");
a.Nh()}),"anchor"===this.type&&(d=this.Bd.attr("tabindex"),("undefined"===d||null===d||isNaN(d))&&this.Bd.attr("tabindex","0")));this.OM();this.bga();this.E0();this.Nh()},Mx:function(){return 500>Date.now()-this.FK},uf:function(b,a,c){this.wf(a,c,{position:{of:"keyboard"===c?this.wb:a}})},Oga:function(){if(this.element.is("input[type\x3dcheckbox]"))this.type="checkbox",this.jx=!0;else if(this.element.is("input[type\x3dradio]"))this.type="radio",this.jx=!0;else if(this.element.is("input[type\x3dbutton],input[type\x3dsubmit],input[type\x3dreset]"))this.type=
"inputPush";else if(this.element.is("button"))this.type="button";else if(this.element.is("a"))this.type="anchor";else throw Error("JET Button not supported on this element type");if(this.jx){var b="label[for\x3d'"+this.element.attr("id")+"']";this.Bd=this.element.siblings().filter(b)}else this.Bd=this.element},Pga:function(){this.jx?(this.Bd.addClass("oj-button-label"),this.element.addClass("oj-button-input oj-helper-hidden-accessible").add(this.Bd).wrapAll("\x3cspan\x3e\x3c/span\x3e"),this.wb=this.element.parent(),
this.wb.addClass("oj-button-toggle"),this.element[0].checked&&this.wb.addClass("oj-selected").removeClass("oj-default oj-focus-only")):this.wb=this.element},widget:function(){return this.wb},_destroy:function(){this.A_();this.document.off(this.eventNamespace);this.element.removeClass("oj-helper-hidden-accessible").removeUniqueId();var b=this.jx;b||this.wb.removeClass(k+" "+l+" "+m+" "+n);this.Bd.html(this.Bd.find(".oj-button-text").html());b?(this.Bd.removeClass("oj-button-label"),a.v.unwrap(this.element)):
this.aO||this.wb.removeAttr("title");g===this.Bd[0]&&(g=null)},oi:function(){this._super();this.Nh()},Wv:function(b){this._super(b);this.OM()},OM:function(){var b=this.be();this.wb.toggleClass("oj-disabled",b);this.wb.toggleClass("oj-enabled",!b);"anchor"!==this.type?(this.element.prop("disabled",b),this.wb.removeAttr("aria-disabled")):this.wb.attr("aria-disabled",b);b?(this.widget().removeClass("oj-active oj-default oj-focus-only oj-hover oj-focus"),e=null,this.qI()):this.Nh()},_setOption:function(b,
a,d){this._super(b,a,d);switch(b){case "chroming":c(this.wb,a);break;case "disabled":this.OM();break;case "label":this.tla();break;case "display":"inputPush"!==this.type&&this.bD();break;case "icons":this.qla(!0);break;case "menu":this.E0()}},refresh:function(){this._super();this.lT&&!f(this).closest(":oj-buttonset").length&&this.Wv(!1);c(this.wb,this.options.chroming)},GA:function(b){"radio"===this.type?(b?d(this.element[0]):this.element).each(function(){var b=f(this).data("oj-ojButton");this.checked?
b.wb.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(b.wb.removeClass("oj-selected"),b.Nh())}):"checkbox"===this.type&&(this.element[0].checked?this.wb.addClass("oj-selected").removeClass("oj-default oj-focus-only"):(this.wb.removeClass("oj-selected"),this.Nh()))},bga:function(){if("inputPush"===this.type)this.p0();else{var b=this.sla(),a=this.cD(!0),c=this.cD(!1);this.bD(b,a,c)}},sla:function(){var b=this.Bd,a=f("\x3cspan class\x3d'oj-button-text'\x3e\x3c/span\x3e",this.document[0]);
this.Mpa?a.append(b.contents()):(b.empty(),a.text(this.options.label));b.append(a);return a},tla:function(){if("inputPush"===this.type)this.p0();else{var b=this.Bd.find(".oj-button-text");b.text(this.options.label);this.bD(b)}},p0:function(){this.options.label&&this.element.val(this.options.label)},qla:function(){if("inputPush"!==this.type){var b=this.cD(!0),a=this.cD(!1);this.bD(void 0,b,a)}},cD:function(b){if(b){var a=".oj-button-icon.oj-start";b="oj-button-icon oj-start";var c=this.options.icons.start,
d="_lastStartIcon",e="prependTo"}else a=".oj-button-icon.oj-end",b="oj-button-icon oj-end",c=this.options.icons.end,d="_lastEndIcon",e="appendTo";a=this.Bd.find(a);c?(a.length?a.removeClass(this[d]):a=f("\x3cspan\x3e\x3c/span\x3e").addClass(b)[e](this.Bd),a.addClass(c)):a.remove();this[d]=c;return!!c},bD:function(b,a,c){void 0===b&&(b=this.Bd.find(".oj-button-text"));void 0===a&&(a=!!this.options.icons.start);void 0===c&&(c=!!this.options.icons.end);var d=a&&c;c=a||c;var e="icons"===this.options.display;
c&&e?(b.addClass("oj-helper-hidden-accessible"),this.aO||(b=b.text(),this.wb.attr("title",f.trim(b)))):(b.removeClass("oj-helper-hidden-accessible"),this.aO||this.wb.removeAttr("title"));a=c?e?d?"oj-button-icons-only":"oj-button-icon-only":d?"oj-button-text-icons":a?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only";this.wb.removeClass(m).addClass(a)},E0:function(){if(this.options.menu&&this.element.is("input"))throw Error("Menu Button functionality is not supported on input elements.");
this.A_();if(this.options.menu){var b=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.gz,function(a){if(a.which===f.ui.keyCode.DOWN)b.J0(a,"firstItem"),a.preventDefault();else if(a.which===f.ui.keyCode.ESCAPE){var c=b.Saa(b.wb);b.qI(a);return c}return!0}).on("click"+this.gz,function(a){var c=b.lJ();c.yA||b.J0(a,"firstItem");c.yA=!1;a.preventDefault();return!0})}},Saa:function(b){return!b.hasClass("oj-selected")},A_:function(){this.element.removeAttr("aria-haspopup").off(this.gz);this.qI();
this.pa&&this.pa.widget().off(this.gz);this.pa=void 0},lJ:function(){if(!this.pa){this.pa=f(this.options.menu).data("oj-ojMenu");if(!this.pa)throw Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');var b=this;this.pa.widget().on("ojclose"+this.gz,function(a){b.nia(a)})}return this.pa},J0:function(b,a){if(!this.be()){var c=this.lJ(),d=c.widget();c.open(b,{launcher:this.element,initialFocus:a});this.jZ=!0;d.attr("aria-label")||d.attr("aria-labelledby")||(this.element.uniqueId(),
this.f0=!0,d.attr("aria-labelledby",this.element.attr("id")));this.wb.addClass("oj-selected").removeClass("oj-default oj-focus-only")}},qI:function(b){this.jZ&&(this.pa.WG(b,!0),this.pa.Sp(b))},nia:function(){this.f0&&(this.lJ().widget().removeAttr("aria-labelledby"),this.f0=!1);this.wb.removeClass("oj-selected");this.Nh();this.jZ=!1},Nh:function(){var b,a;this.wb.is(".oj-hover, .oj-active, .oj-selected, .oj-disabled")?a=b=!1:(a=this.wb.is(".oj-focus"),b=!a);this.wb.toggleClass("oj-default",b);this.wb.toggleClass("oj-focus-only",
a)}});a.ya("oj.ojButtonset",f.oj.baseComponent,{SY:"button, input[type\x3dbutton], input[type\x3dsubmit], input[type\x3dreset], input[type\x3dcheckbox], input[type\x3dradio], a",widgetEventPrefix:"oj",options:{checked:null,chroming:"full",focusManagement:"oneTabstop"},Yx:function(b,a){var c=f.type(b),d;if("null"===c||"array"===c)d=a.filter("input[type\x3dcheckbox]").length===a.length;if(d&&"null"===c)throw Error("Invalid 'checked' value set on JET Buttonset: "+b);if("string"===c||"null"===c)(c=((c=
a[0].name)||1>=a.length)&&a.filter("input[type\x3dradio][name\x3d"+c+"]").length===a.length&&(null===b||a.filter("[value\x3d"+b+"]").length))&&a.each(function(){this.checked=this.value===b}),c=c||null===b;else if("array"===c){var e;(c=d&&b.concat().sort().every(function(b){var c=b!==e&&a.filter("[value\x3d"+b+"]").length;e=b;return c}))&&a.each(function(){this.checked=-1<b.indexOf(this.value)})}else c=!1;if(!c)throw Error("Invalid 'checked' value set on JET Buttonset: "+b);},YV:function(b){var a=
void 0,c=null,d=null;b.each(function(){if("input"!==this.tagName.toLowerCase())return a=void 0,!1;var b=this.type.toLowerCase(),e;if("radio"===b)b=!0,e=this.name.toLowerCase();else if("checkbox"===b)b=!1,e=null;else return a=void 0,!1;if(void 0!==a&&(b!==c||e!==d||c&&!d))return a=void 0,!1;void 0===a?(a=b?this.checked?this.value:null:this.checked?[this.value]:[],c=b,d=e):this.checked&&(c?a=this.value:a.push(this.value))});return a},Fv:function(b,a,c){return"checked"===b?a===c?!0:"array"===f.type(a)&&
"array"===f.type(c)&&!f(a).not(c).length&&!f(c).not(a).length:this._superApply(arguments)},ae:function(b,a){this._super(b,a);this.Fd=this.element.find(this.SY);if(!("checked"in a)){this.cO=!0;var c=this.YV(this.Fd);"array"===f.type(c)&&(this.options.checked=[]);void 0!==c&&this.option("checked",c,{_context:{Wa:!0}})}},_ComponentCreate:function(){this._super();this.element.attr(a.Components.xn,this.widgetName).addClass("oj-buttonset oj-component");this.A0(this.options.focusManagement);this.Ba(!0)},
uf:function(b,a,c){b=this.element.find(":oj-button[tabindex\x3d0]");this.wf(a,c,{launcher:b,position:{of:"keyboard"===c?b.ojButton("widget"):a}})},uo:function(b){b=!!b;this.Fd.each(function(){f(this).data("oj-ojButton").Wv(b)})},A0:function(b){"oneTabstop"===b?this.element.attr("role","toolbar"):this.element.removeAttr("role")},_setOption:function(b,a,d){this._superApply(arguments);"disabled"===b?this.uo(a):"checked"===b?(this.Yx(a,this.Fd),this.Fd.each(function(){f(this).data("oj-ojButton").GA(!1)})):
"focusManagement"===b?this.A0(a):"chroming"===b&&(c(this.element,a),this.Fd.ojButton("refresh"))},refresh:function(){this._super();this.Ba(!1)},Ba:function(b){var a=this;this.Uf="rtl"===this.dc();c(this.element,this.options.chroming);b?this.cO||this.Yx(this.options.checked,this.Fd):this.Fd=this.element.find(this.SY);this.element.toggleClass("oj-buttonset-multi",1<this.Fd.length);this.Fd.filter(":oj-button").ojButton("refresh").each(function(){f(this).data("oj-ojButton").GA(!1)}).end().not(":oj-button").ojButton().end().map(function(){return f(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").filter(":first").addClass("oj-buttonset-first").end().filter(":last").addClass("oj-buttonset-last").end().end();
this.uo(this.options.disabled);"oneTabstop"===this.options.focusManagement&&(this.Fd.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(b){a.xq(b,f(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){f(this).data("oj-ojButton").be()||a.Tq(f(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(){a.Tq(f(this))}),this.rl=this.Fd.filter(function(){return!f(this).data("oj-ojButton").be()}),this.qK(b))},
qK:function(b){var a=f(this.Hq);this.Hq=void 0;this.Fd.attr("tabindex","-1");b=b||!a.is(this.rl)?this.rl.first():a;this.Tq(b)},JK:function(b){var a=this.rl;return b.map(function(b,c){if("radio"!=c.type||c.checked||""==c.name)return c;var e=d(c,a).filter(":checked");return e.length?e[0]:c})},Tq:function(b){b=this.JK(b);var a=b[0],c=this.Hq;a!==c&&(f(c).attr("tabindex","-1"),b.attr("tabindex","0"),this.Hq=a)},xq:function(b,a){switch(b.which){case f.ui.keyCode.LEFT:case f.ui.keyCode.RIGHT:b.preventDefault();
var c=this.rl,d=c.length;if(2>d)break;var e=c.index(a);c.eq((e+(b.which==f.ui.keyCode.RIGHT^this.Uf?1:-1)+d)%d).focus();break;case f.ui.keyCode.UP:case f.ui.keyCode.DOWN:"radio"==a.attr("type")&&b.preventDefault()}},_destroy:function(){this.element.removeClass("oj-buttonset oj-component "+n).removeAttr(a.Components.xn).removeAttr("role");"oneTabstop"===this.options.focusManagement&&this.Fd.attr("tabindex","0");this.Fd.map(function(){return f(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}});
var e,g,h=".ojButton",k="oj-button oj-component oj-enabled oj-default",l="oj-hover oj-active oj-selected",m="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only",n="oj-button-full-chrome oj-button-half-chrome oj-button-outlined-chrome",p={full:"oj-button-full-chrome",half:"oj-button-half-chrome",outlined:"oj-button-outlined-chrome"},r={button:["ojButtonset","ojToolbar"],buttonset:["ojToolbar"]};a.Components.Tm({ojButton:{chroming:a.Components.nh(function(a){return b("button",
a.element,a.containers)})},ojButtonset:{chroming:a.Components.nh(function(a){return b("buttonset",a.element,a.containers)})}})})()});