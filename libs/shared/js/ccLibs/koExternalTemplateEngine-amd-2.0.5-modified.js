define(["knockout","jquery","infuser"],function(e){var t=function(t,n,a){var l,p=this;p.bindingContext=a,p.templateId=t,p.loaded=!1,p.template=e.observable(infuser.defaults.useLoadingTemplate?infuser.defaults.loadingTemplate.content:void 0),p.template.data={},p.options=e.utils.extend({},n),p.options.templateId=t,p.options&&p.options.afterRender&&(l=p.options.afterRender,n.afterRender=function(){p.loaded&&l.apply(p.options,arguments)},p.options.afterRender=n.afterRender)};e.utils.extend(t.prototype,{data:function(e,t){return 1===arguments.length?("precompiled"===e&&this.template(),this.template.data[e]):void(this.template.data[e]=t)},text:function(e){return this.loaded||this.getTemplate(),0===arguments.length?this.template():void this.template(arguments[0])},getTemplate:function(){var e=this;"undefined"!=typeof e.options.templateSrc?(e.template(e.options.templateSrc),e.loaded=!0):infuser.get(e.options,function(t){e.data("precompiled",null),e.template(t),e.loaded=!0})}});var n=function(n){var a=n?new n:new e.nativeTemplateEngine;return a.templates={},a.makeTemplateSource=function(n,l,p){if("string"==typeof n){var o=document.getElementById(n);return o?new e.templateSources.domElement(o):p.templateUrl?(a.templates[p.templateUrl+n]||(a.templates[p.templateUrl+n]=new t(n,p,l)),a.templates[p.templateUrl+n]):(a.templates[n]||(a.templates[n]=new t(n,p)),a.templates[n])}if(1==n.nodeType||8==n.nodeType)return new e.templateSources.anonymousTemplate(n)},a.renderTemplate=function(e,t,n){var l=a.makeTemplateSource(e,t,n);return a.renderTemplateSource(l,t,n)},a};e.KoExternalTemplateEngine=n,$.tmpl&&$.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?e.koExternalTemplateEngine=new n(e.jqueryTmplTemplateEngine):e.koExternalTemplateEngine=new n,e.setTemplateEngine(e.koExternalTemplateEngine)});
//# sourceMappingURL=koExternalTemplateEngine-amd-2.0.5-modified.js.map