define("ccKoExtensions",["knockout","jqueryui","currencyHelper","CCi18n","ccDate","ccNumber","profileHelper","ccLogger","dateTimeUtils","pubsub","ccConstants","ojs/ojcore","i18next","navigation"],function(e,t,i,a,r,n,s,l,d,o,u,p,c,g){"use strict";var m=u.ALLOW_HASHBANG,b=!1;window.history&&window.history.pushState&&(b=!0),function(){var t,r,n,s,l,o,u,p,c,g,m,b="CC-propertyEditor-";m=function(e,t){"currencyMap"===this.type&&e?(this.property()[e.id](null),$("#"+this.property()[e.id].formId).focus()):(this.property(null),$("#"+this.property.formId).focus())},t=function(e,t){var i;i="currencyMap"===this.type?this.property()[e.id]:this.property,void 0==i||i.isModified()||i.isValid()?i&&i.forcedModified&&i()&&(i.forcedModified=!1):(i.isModified(!0),i.forcedModified=!0)},c=function(){var e=!0,t=$("#"+this.idBase+"field").val();""===t?$("#"+this.idBase+"controlGroup .cc-required-message").css("display","inline-block"):$("#"+this.idBase+"controlGroup .cc-required-message").css("display","none"),e=d.validateDate(t),e===!1?$("#"+this.idBase+"controlGroup .cc-invalid-date").css("display","inline-block"):$("#"+this.idBase+"controlGroup .cc-invalid-date").css("display","none")},g=function(){var e=!0,t=$("#"+this.idBase+"field").val();e=d.validateTime(t),e===!1&&($("#"+this.idBase+"field").val("T00:00:00"),this.property("T00:00:00"))},p=function(e){$("#"+e).focus()},r=function(e,t){var i=$("#"+e).get(0),a=$("#"+t.target.id);"text"==i.type?n(i,a,!1):n(i,a,!0)},n=function(e,t,i){i?(e.type="text",t.text(a.t("ns.common:resources.hideText"))):(e.type="password",t.text(a.t("ns.common:resources.revealText")))},s=function(e,t){var i=$(t.target),a=$(t.target).prev("input"),r=1===t.which||32===t.which||13===t.which;if(r)"block"!=i.css("display")&&"inline-block"!=i.css("display")||(i.toggle(!1),$(t.target).prev("input").attr("disabled",!1),a.select(),a.val(""),a.focus());else if(9===t.which)return!0},l=function(e,t){var i=$(t.target),a=i.next("input");0===i.val().length&&(e&&(i.attr("disabled","true"),a.toggle(!0)),this.validate())},u=function(t,i){var a,r,n,s;if(n=e.utils.unwrapObservable(i.type),i.prefix=i.prefix||t.prefix,i.unit=i.unit||t.unit,!n&&i.values&&(n="radio"),t.rules)for(a=t.rules(),s=0;s<a.length;s+=1)if(r=a[s],"required"!==r.rule||!r.params||r.condition&&!r.condition()||i.required===!1||(i.required=!0),!n)switch(r.rule){case"number":n="number";break;case"date":n="date-ojet";break;case"bool":n="checkbox"}e.utils.unwrapObservable(i.type)||(i.type=n||"shortText"),i.label||(i.label=t.label)},e.bindingHandlers.propertyEditor={init:function(t,i){e.utils.unwrapObservable(i());return{controlsDescendantBindings:!0}},update:function(n,d,f,v,h){var w,y,O,x,H,T,I,W,E,_=e.utils.unwrapObservable(d()),k=e.observable(!0),M=a.t("ns.common:resources.numberValidation");if(_.property&&e.isObservable(_.property)){T=_.property,T.extend({validatable:!0}),W=e.utils.unwrapObservable(_.id),E=e.utils.unwrapObservable(_.type),w=new Date,y=new Date(w.getFullYear(),w.getMonth(),w.getDate()),I=!_.clearValue,T.extend({validatable:!0}),O={writable:e.observable(!0),visible:e.observable(!0),currentDate:w,minDate:y,valueUpdate:"change",numericValidationErrorMessage:M};for(H in _)_.hasOwnProperty(H)&&("writable"!==H||e.isObservable(_[H])?O[H]=_[H]:O.writable(_[H]));var P=function(t,i){var a,r=null,n=e.contextFor(this);if(a=n.$parent?"currencyMap"===n.$parent.type:"currencyMap"===n.$parents[1].type,r=a?n.$parent.property()[e.dataFor(this).id]:e.dataFor(this),r.numericJetValidation(!0),"messagesShown"===i.option){var s=$(t.target).ojInputText("isValid");s?r.numericJetValidation(!0):r.numericJetValidation(!1)}else r.numericJetValidation(!0)},S=e.pureComputed({read:function(){return T()},write:function(t){var i=O.fractionalDigits,a=!1;if("digit"===e.utils.unwrapObservable(O.type)&&(a=!0),void 0!=t)if(i)T(t.toFixed(i));else{var r=t.toString().split(".");if(r&&2==r.length){if(a)return void T(t.toFixed(0));T(r[1].length>3?t.toFixed(3):t)}else T(t)}else T(t)}});u(T,O),_.writable===!1&&O.writable(!1),O.helpText=e.observable(e.utils.unwrapObservable(_.helpText)),O.isRequiredButMissing=e.computed(function(){return O.required&&e.isObservable(O.property.isModified)&&O.property.isModified()&&null==O.property()},O),O.titleText=e.computed(function(){var e="";return e=O.property.hasOwnProperty("isValid")?O.property.isValid()?O.helpText():O.property.error:O.helpText()},O),x={};var A=e.utils.unwrapObservable(O.type);"currency"!==A&&"currencyMap"!==A&&"digit"!==A||("currency"==A||"currency"===A?O.fractionalDigits=i.currencyObject().fractionalDigits:(O.fractionalDigits=0,O.numericValidationErrorMessage=a.t("ns.common:resources.digitValidation")),"currencyMap"!==A&&(A="number")),"enumerated"===A&&O.propertyValuesValue&&(A="complex-enumerated"),x.name=b+A;var L=$(n).closest("form").attr("id");if(L||(L=$(n).parent().attr("id")),O.idBase=L+"-"+x.name+"-"+(W?W+"-":""),"currencyMap"===A)for(H in T())T().hasOwnProperty(H)&&(T()[H].formId=O.idBase+H+"-field");else T.formId=O.idBase+"field";x.data=O,x.if=e.utils.unwrapObservable(_.if)||"undefined"==typeof e.utils.unwrapObservable(_.if),O.required=e.utils.unwrapObservable(O.required||T.required),"currencyMap"===O.type?$.each(O.property(),function(i){O.property()[i].validate=t,O.property()[i].numericJetValidation=e.observable(!0),O.property()[i].addonFocusInput=p}):(O.validate=t,O.numericJetValidation=k,O.addonFocusInput=p),O.clearValueFunction=m,"revealablePassword"===O.type?(O.togglePasswordVisibility=r,O.clickOrKeydownToUpdatePassword=s,O.blurPasswordField=l,O.keyUpInPasswordField=o):"number"===O.type||"currency"===O.type||"digit"===O.type||e.isObservable(O.type)&&"number"===O.type()?(O.customJetOptionChangeListener=P,O.computedValueWithFractions=S):"currencyMap"===O.type&&$.each(O.property(),function(e){O.property()[e].customJetOptionChangeListener=P,O.property()[e].computedValueWithFractions=S}),"date-ojet"===O.type||"time-ojet"===O.type||"date-time-ojet"===O.type?(O.validateOjetDate=c,O.validateOjetTime=g,O.dateTitleText=a.t("ns.common:resources.datePicker"),O.timeTitleText=a.t("ns.common:resources.timePicker")):!e.isObservable(O.type)||"date-ojet"!==O.type()&&"time-ojet"!==O.type()&&"date-time-ojet"!==O.type||(O.validateOjetDate=c,O.validateOjetTime=g,O.dateTitleText=a.t("ns.common:resources.datePicker"),O.timeTitleText=a.t("ns.common:resources.timePicker")),e.bindingHandlers.template.update(n,function(){return x},f,O,h)}}}}(),e.bindingHandlers.inTabFlow={update:function(t,i){var a=e.utils.unwrapObservable(i());"A"==$(t).prop("tagName")?$(t).attr("tabindex",a?0:-1):$(t).find(":input").attr("tabindex",a?0:-1)}},e.bindingHandlers.validatableValue={init:function(t,i,a,r,n){var s=i(),l=n.$parent.ignoreBlur;if($(t).blur(function(){return!(!l||!l())||void(s.isModified&&e.isObservable(s.isModified)&&s.isModified(!0))}),s.rules&&e.isObservable(s.rules))for(var d=s.rules().length,o=0;o<d;++o)if("required"===s.rules()[o].rule){s.rules()[o].params===!0&&$(t).attr("required","required");break}e.bindingHandlers.value.init(t,i,a,r,n)},update:function(t,i,a,r,n){e.bindingHandlers.value.update(t,i,a,r,n)}},e.bindingHandlers.validatableTarget={init:function(t,i,a,r,n){var s=i();$(t).blur(function(){s.isModified&&e.isObservable(s.isModified)&&s.isModified(!0)})}},e.bindingHandlers.ccLink={init:function(t,i,a,r,n){t.addEventListener("click",function(e){var i={usingCCLink:!0};if($(t).trigger("click.cc.unsaved",i),i.preventDefault)e.stopImmediatePropagation();else{var a=t.pathname+t.search;a&&window.location.pathname!==a&&g.goTo(a)}return e.preventDefault(),!1},!1);var s,l=e.utils.unwrapObservable(i()),d=l;if(l){if("string"==typeof l){var o=null,p=l;if(r.links)o=r;else{s=n.$parents;for(var c=0;c<s.length;c++)if(s[c].links){o=s[c];break}}o&&(d=o.links()[p])}if(d){var b="";d.url?b=d.url:d.route&&(b=d.route);var f=n.$masterViewModel;f&&f.isPreview&&!f.isPreview()&&f.storeConfiguration.allowSiteSwitchingOnProduction&&f.storeConfiguration.allowSiteSwitchingOnProduction()&&window.siteIdOnURL&&window.siteIdOnURL.length>0&&(b+=b.indexOf("?")==-1?"?"+u.URL_SITE_PARAM+"="+encodeURIComponent(window.siteIdOnURL):"&"+u.URL_SITE_PARAM+"="+encodeURIComponent(window.siteIdOnURL));var v=b;m&&(v="#!"+b);var h="";if(window.siteBaseURLPath&&"/"!==window.siteBaseURLPath&&(h=window.siteBaseURLPath),window.urlLocale){var w=JSON.parse(window.urlLocale)[0].name;h+="/"+w}$(t).prop("href",h+b),0===$(t).children().length&&""==$.trim($(t).text())&&(d.displayName?$(t).text(d.displayName):$(t).text(window.location.href+v))}}}},e.bindingHandlers.ccNavigation={update:function(t,i,a,r,n){var s=e.utils.unwrapObservable(i());$(t).on("click.cc.nav",function(e){var i=t.pathname+t.search,a={usingCCLink:!0};return $(t).trigger("click.cc.unsaved",a),"prevent"==s||a.preventDefault||g.goTo(i),e.preventDefault(),e.stopImmediatePropagation(),!1})}},e.bindingHandlers.triggerMessage={update:function(t,i){var a=i();if(a.triggerFired&&e.isObservable(a.triggerFired)){var r=function(){return a.triggerFired()?a.triggerMessage:null},n=function(){return!!a.triggerFired()};e.bindingHandlers.text.update(t,r),e.bindingHandlers.visible.update(t,n)}}},e.bindingHandlers.widgetLocaleText={update:function(e,t,i,a,r){var n,s,l=t();if(a.translate)s=a;else for(var d=r.$parents,o=0;o<d.length;o++)if(d[o].translate){s=d[o];break}"string"==typeof l?n=s.translate(l,null,!0):"object"==typeof l&&void 0!=l.value&&(n=s.translate(l.value,l.params,!0,l.custom)),n&&("string"==typeof l||"object"==typeof l&&"innerText"==l.attr?$(e).text(n):"object"==typeof l&&void 0!=l.attr&&$(e).attr(l.attr,n))}},e.bindingHandlers.disabled={update:function(t,i,a,r,n){var s,l,d=!1,o=i();if("boolean"==typeof o?d=e.utils.unwrapObservable(o):"object"==typeof o&&void 0!=o.condition&&(d=e.utils.unwrapObservable(o.condition),void 0!=o.click&&(s=e.utils.unwrapObservable(o.click)),void 0!=o.link&&(l=function(){return e.utils.unwrapObservable(o.link)})),d){$(t).off("click.handler");var u=$(t).prop("tagName");"A"==u&&$(t).attr("href","#"),$(t).on("click.handler",function(e){return e.stopImmediatePropagation(),!1}),$(t).addClass("disabled")}else $(t).removeClass("disabled"),$(t).off("click.handler"),s&&$(t).on("click.handler",function(){var e=s.bind(r);return e(),!1}),l&&e.bindingHandlers.ccLink.init(t,l,a,r,n)}},e.bindingHandlers.ccDate={update:function(t,i,a,n,s){var l=i(),d=e.utils.unwrapObservable(l),o=e.utils.unwrapObservable(d.date),u=e.utils.unwrapObservable(d.format),p=e.utils.unwrapObservable(d.returnedType),c=e.utils.unwrapObservable(d.returnedDate);c=r.formatDateAndTime(o,u,p,c),$(t).text(c)}},e.bindingHandlers.ccResizeImage={getNoImageSiteSetting:function(t){for(var i=null,a=0;a<t.$parents.length;a++)if(e.isObservable(t.$parents[a].site)){i=e.unwrap(t.$parents[a].site().noImageSrc);break}return i},init:function(t,i,a,r,n){var s,l,d,o,u,p=e.utils.unwrapObservable(i());"object"==typeof p&&"IMG"===t.nodeName&&(s=e.utils.unwrapObservable(p.src),l=e.utils.unwrapObservable(p.errorSrc),d=e.bindingHandlers.productImageSource.getNoImageSiteSetting(n),o=d&&d.length>0?d:l,s&&o&&(u=new Image,u.src=o))},update:function(t,i,a,r,n){var s,l,d,o,p,c,g,m,b,f,v,h="",w=e.utils.unwrapObservable(i()),y=u.DEFAULT_IMG_SIZE_FOR_VIEWPORT,O=["xsmall","small","medium","large"],x=function(e){if(e){var t=e.split(",");return 2==t.length&&(!isNaN(t[0])&&!isNaN(t[1]))}return!1},H=function(){var t=document.createElement("img"),i="srcset"in t,a="sizes"in t,r=w.isSrcSetEnabled&&e.utils.unwrapObservable(w.isSrcSetEnabled);return i&&a&&r},T=function(){var t="",i=e.utils.unwrapObservable(w.outputFormat),a=e.utils.unwrapObservable(w.quality),r=e.utils.unwrapObservable(w.alphaChannelColor);return i&&(t="&"+u.IMAGE_OUTPUT_FORMAT+"="+i),a&&(t=t+"&"+u.IMAGE_QUALITY+"="+a),r&&(t=t+"&"+u.IMAGE_ALPHA_CHANNEL_COLOR+"="+r),t},I=function(t,i,a){var r="";w[t+"_img"]?r=e.utils.unwrapObservable(w[t+"_img"]):a&&(r=_(a,i.imageHeight,i.imageWidth));var n=T();n&&(r.startsWith(u.ENDPOINT_IMAGES+"?source=")?r+=n:r=u.ENDPOINT_IMAGES+"?source="+r+n);y[t].width;if(r&&i.imageWidth)return r=r+" "+i.imageWidth+"w"},W=function(t){var i,a={},r=t?t:$(window)[0].innerWidth||$(window).width();"large"==r||r>=u.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(a.imageHeight=y.large.height,a.imageWidth=y.large.width,a.minWidth=y.large.minWidth,i="large"):"medium"==r||r>u.VIEWPORT_TABLET_UPPER_WIDTH&&r<u.VIEWPORT_LARGE_DESKTOP_LOWER_WIDTH?(a.imageHeight=y.medium.height,a.imageWidth=y.medium.width,a.minWidth=y.medium.minWidth,a.maxWidth=y.medium.maxWidth,i="medium"):"small"==r||r>=u.VIEWPORT_TABLET_LOWER_WIDTH&&r<=u.VIEWPORT_TABLET_UPPER_WIDTH?(a.imageHeight=y.small.height,a.imageWidth=y.small.width,a.minWidth=y.small.minWidth,a.maxWidth=y.small.maxWidth,i="small"):(a.imageHeight=y.xsmall.height,a.imageWidth=y.xsmall.width,a.maxWidth=y.xsmall.maxWidth,i="xsmall");var n=!1;switch(i){case"large":x(e.utils.unwrapObservable(w.large))&&(a.imageHeight=w.large.split(",")[0],a.imageWidth=w.large.split(",")[1],n=!0);break;case"medium":x(e.utils.unwrapObservable(w.medium))&&(a.imageHeight=w.medium.split(",")[0],a.imageWidth=w.medium.split(",")[1],n=!0);break;case"small":x(e.utils.unwrapObservable(w.small))&&(a.imageHeight=w.small.split(",")[0],a.imageWidth=w.small.split(",")[1],n=!0);break;case"xsmall":x(e.utils.unwrapObservable(w.xsmall))&&(a.imageHeight=w.xsmall.split(",")[0],a.imageWidth=w.xsmall.split(",")[1],n=!0)}if(!n)if(x(e.utils.unwrapObservable(w.size)))a.imageHeight=w.size.split(",")[0],a.imageWidth=w.size.split(",")[1];else if(e.utils.unwrapObservable(w.size))switch(e.utils.unwrapObservable(w.size)){case"large":x(e.utils.unwrapObservable(w.large))?(a.imageHeight=w.large.split(",")[0],a.imageWidth=w.large.split(",")[1],n=!0):(a.imageHeight=y.large.height,a.imageWidth=y.large.width);break;case"medium":x(e.utils.unwrapObservable(w.medium))?(a.imageHeight=w.medium.split(",")[0],a.imageWidth=w.medium.split(",")[1],n=!0):(a.imageHeight=y.medium.height,a.imageWidth=y.medium.width);break;case"small":x(e.utils.unwrapObservable(w.small))?(a.imageHeight=w.small.split(",")[0],a.imageWidth=w.small.split(",")[1],n=!0):(a.imageHeight=y.small.height,a.imageWidth=y.small.width);break;case"xsmall":x(e.utils.unwrapObservable(w.xsmall))?(a.imageHeight=w.xsmall.split(",")[0],a.imageWidth=w.xsmall.split(",")[1],n=!0):(a.imageHeight=y.xsmall.height,a.imageWidth=y.xsmall.width)}return a},E=function(e){if(e){var t=e.minWidth,i=e.maxWidth,a=e.imageWidth,r="";t&&(r="(min-width:"+t+"px)");var n="";return i&&(n="(max-width:"+i+"px)"),r&&n&&a?r+" and "+n+" "+a+"px":r&&a?r+" "+a+"px":n&&a?n+" "+a+"px":""}},_=function(e,t,i){if(e.indexOf(u.ENDPOINT_IMAGES+"?source=")>-1){var a=/height=[0-9]+/i;e.search(a)&&(e=e.replace(a,"height="+t));var r=/width=[0-9]+/i;return e.search(r)&&(e=e.replace(r,"width="+i)),e}return u.ENDPOINT_IMAGES+"?source="+e+"&height="+t+"&width="+i};if("object"==typeof w&&"IMG"===t.nodeName){var k=W();f=k.imageHeight,v=k.imageWidth;var M=!w.setMinHeightBeforeImageLoad||!e.utils.unwrapObservable(w.isSetMinHeightBeforeImageLoad)||e.utils.unwrapObservable(w.isSetMinHeightBeforeImageLoad);if(t.parentNode&&M){var P=t.parentNode;if("cc_img__resize_wrapper"!==P.getAttribute("id")){var S=document.createElement("div");t.onload=function(){if(S.style.minHeight="0px",s===p&&H()){for(var e="",i="",a=0;a<O.length;a++){var r=W(O[a]),n=I(O[a],r,p);n&&e.indexOf(n)<0&&(e=e?e+","+n:n);var l=E(r);l&&(i=i?i+","+l:l)}!e||void 0!==t.srcset&&t.srcset===e||(t.srcset=e),!i||void 0!==t.sizes&&t.sizes===i||(t.sizes=i)}},S.style.maxWidth="100%",S.style.minHeight=f+"px",S.style.height="100%";var A=e.utils.unwrapObservable(w.id);A?S.setAttribute("id","cc_img__resize_wrapper-"+A):S.setAttribute("id","cc_img__resize_wrapper"),P.replaceChild(S,t),S.appendChild(t)}}if(h=T(),l=e.utils.unwrapObservable(w.source),l?(s=H()?l:_(l,f,v),h&&(s+=h)):s=w.errorSrc,d=e.utils.unwrapObservable(w.errorSrc),null!=d&&0!=d.length||(d="/img/no-image.jpg"),o=e.bindingHandlers.ccResizeImage.getNoImageSiteSetting(n),p=o&&o.length>0?o:d,l=encodeURI(l),0==l.indexOf("/img/no-image.jpg")&&(s=p,l=p),c||(c=e.utils.unwrapObservable(w.alt)),g||(g=e.utils.unwrapObservable(w.title)),m=e.utils.unwrapObservable(w.errorAlt),b=e.utils.unwrapObservable(w.onerror),s){if(c&&(t.alt=c),g&&(t.title=g),t.onerror=function(){var e=new Image;e.onload=function(){t.src=p,t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),b&&b(t),t.onerror=""},e.onerror=function(){var e=new Image;e.onload=function(){t.src=e.src,t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),b&&b(t),t.onerror=""},e.onerror=function(){t.src="/img/no-image.jpg",t.srcset&&t.removeAttribute("srcset"),t.sizes&&t.removeAttribute("sizes"),b&&b(t),t.onerror=""},e.src=d},s===p&&(p=p===o?d:"/img/no-image.jpg"),e.src=p,m&&(t.alt=m)},t.src=s,H()&&s!==p){for(var L="",N="",B=0;B<O.length;B++){var D=W(O[B]),R=I(O[B],D,l);R&&L.indexOf(R)<0&&(L=L?L+","+R:R);var V=E(D);V&&(N=N?N+","+V:V)}L&&(t.srcset=L),N&&(t.sizes=N)}}else t.src=p,m?t.alt=m:c&&(t.alt=c),b&&b(t)}}},e.bindingHandlers.ccDateTime={update:function(t,i,a,r,n){var s=i(),l=e.utils.unwrapObservable(s),o=e.utils.unwrapObservable(l.date),u=e.utils.unwrapObservable(l.format),p=e.utils.unwrapObservable(l.dateFormat),c=e.utils.unwrapObservable(l.timeFormat),g=e.utils.unwrapObservable(l.date);g=d.getFormattedDateTime(o,u,p,c),$(t).text(g)}},e.bindingHandlers.ccNumber={update:function(t,i,a,r,s){var l=i(),d=e.utils.unwrapObservable(l),o=null;o=n.formatNumber(d),$(t).text(o)}},e.bindingHandlers.setContextVariable={update:function(t,i,a,r,n){var s=e.utils.unwrapObservable(i());n["$"+s.name]=e.utils.unwrapObservable(s.value)}},e.virtualElements.allowedBindings.setContextVariable=!0,e.bindingHandlers.element={init:function(t,i,a,r,n){var s=e.utils.unwrapObservable(i()),d=r.jsPath()+"/";for(var o in r.elementsJs)if(s===o&&r.elementsJs.hasOwnProperty(o)){var u=r.elementsJs[o]();if(null!==u){var p="widget/",c=u.indexOf(p)+p.length;u.substring(0,c-1),u.lastIndexOf(".");require({baseUrl:d},[u],function(e){"function"==typeof e?e():e.hasOwnProperty("onLoad")&&"function"==typeof e.onLoad&&e.onLoad(r);var t=e.elementName;r.hasOwnProperty(t)?l.warn("Element name "+t+" is same as existing property"):r[t]=e,r.elements[t]=e,r.initialized()&&r.initialized.valueHasMutated()})}}return{controlsDescendantBindings:!0}},update:function(t,i,a,r,n){var s,l,d=e.utils.unwrapObservable(i());if(d){if("string"==typeof d)s=d;else{if("object"!=typeof d||void 0==d.type)return;s=d.type,void 0!=d.id&&(l=d.id)}l&&""!==l||(l=a().id&&""!==a().id?a().id:"id");var o=n.$data.id&&n.$data.id()?n.$data.id():"",u=n.$data.typeId&&n.$data.typeId()?n.$data.typeId():"",p={};p.type=s,p.fullType=u+"-"+s,p.id=l,p.textId="text."+l,p.elementId=o+"-"+s+"-"+l,p.styles="",""!==l&&n.$elementConfig&&(p.config=n.$elementConfig[l],p.config&&p.config.font&&(p.styles=p.config.font.styles||"",p.config.font.styles.display&&"block"===p.config.font.styles.display&&p.config.padding&&(p.config.padding.paddingTop>0||p.config.padding.paddingBottom>0||p.config.padding.paddingLeft>0||p.config.padding.paddingRight>0)&&(p.styles.padding=p.config.padding.paddingTop+"px "+p.config.padding.paddingRight+"px "+p.config.padding.paddingBottom+"px "+p.config.padding.paddingLeft+"px"))),$(t).attr("id",p.elementId),""!=p.styles&&$(t).css(p.styles),n.$elementInstance=p;var c={};c.name=p.fullType,c.data=r,c.url="",e.bindingHandlers.template.update(t,function(){return c},a,r,n)}}},e.bindingHandlers.addTemplate={update:function(t,i,a,r,n){var s=e.utils.unwrapObservable(i());"string"==typeof s&&$(s).not("text").each(function(){var e=this.id;e&&""!==e&&0==$("body").find("#"+e).length&&$("body").append(this)})}},e.virtualElements.allowedBindings.addTemplate=!0,e.bindingHandlers.previewBar={update:function(t,i,a,r,n){var s=e.utils.unwrapObservable(i());if(s&&n.$data.previewBar){var l=n.$data.previewBar,d=l.cssPath,o=l.templateUrl,u=l.templateName;$("link[href='"+d+"']").length||$('<link href="'+d+'" rel="stylesheet">').appendTo("head");var p={};p.name=u,p.data=r,p.templateUrl=o,p.afterRender=l.attachEventHandlers,$.when(l.ojLoaded).done(function(){e.bindingHandlers.template.update(t,function(){return p},a,r,n)})}}},e.virtualElements.allowedBindings.previewBar=!0,e.bindingHandlers.embeddedAssistance={init:function(t,i,a,r,n){var s=i();s.subscribe(function(){e.bindingHandlers.embeddedAssistance.update(t,i,a,r,n)})},update:function(t,i,a,r,n){var s=i();s.extend({validatable:!0});var l=!1,d=!1;l=s.isModified()&&s().length>0,d=s.isValid();var o=function(){return l?d?null:s.embeddedAssistance:null},u=function(){return!!l&&!d};e.bindingHandlers.text.update(t,o),e.bindingHandlers.visible.update(t,u)}},e.extenders.propertyWatch=function(t){return t.initialState=e.observable(e.toJSON(t)),t.resetWatch=function(){t.initialState(e.toJSON(t))},t.hasChanged=e.computed(function(){var i=t.initialState()!==e.toJSON(t);return i&&t.resetWatch(),i}).extend({notify:"always",throttle:100}).extend({notify:"always"}),t},e.extenders.trigger=function(t,i){return t.triggerSet=!1,t.triggerValue=null,t.triggerMessage="",t.triggerFired=e.observable(!1),i&&(i.value&&(t.triggerValue=i.value,t.triggerSet=!0),i.message&&(t.triggerMessage=i.message)),t.trigger=function(e){t()===t.triggerValue?t.triggerFired(!0):t.triggerFired(!1)},t.clearTrigger=function(){t.triggerFired(!1)},t.triggerSet&&t.subscribe(t.trigger),t},e.bindingHandlers.accessControl={init:function(t,i,a){var r=a().accessControl,n=r.defaultAction?r.defaultAction:u.HIDE;s.isAuthorized(r.accessKey)?n===u.SHOW&&($(t).hide(),e.virtualElements.emptyNode(t)):n===u.SHOW||($(t).hide(),e.virtualElements.emptyNode(t))}},e.virtualElements.allowedBindings.accessControl=!0,e.bindingHandlers.agentBar={update:function(t,i,a,r,n){var s=e.utils.unwrapObservable(i());if(s){var l=(n.$data,"/shared/css/agent-bar.css");$("link[href='"+l+"']").length||$('<link href="'+l+'" rel="stylesheet">').appendTo("head");var d={};d.name="agent-bar.template",d.data=r,d.templateUrl="/shared/templates",e.bindingHandlers.template.update(t,function(){return d},a,r,n)}}},e.virtualElements.allowedBindings.agentBar=!0});
//# sourceMappingURL=cc-ko-extensions.js.map