define("notifications",["jquery","knockout","ccConstants","CCi18n","pubsub"],function(t,e,n,o,i){"use strict";function a(){var a,c,s=this,r=0,l=65;s.enabled=!0,s.publishAccessibleMessages=!1,s.CLOSE_BUTTON_HTML='<a href="#cc-notification-close-button" class="close cc-notification-close pull-right" data-dismiss="alert"><i class="fa fa-times-circle"></i><span class="cc-reader-text">Close notification</span></a>',s.notify=function(e,n){if(s.enabled||n)if(Array.isArray(e))t.each(e,function(t,e){if(null===e.style)throw"Notification type unknown";s.notifyBuild(e)});else{if(null===e.style)throw"Notification type unknown";s.notifyBuild(e)}},s.growlSuccess=function(e,n){Array.isArray(e)?t.each(e,function(t,n){n.style="growl",n.status="success",n.close=!0,n.fade=!0,n.header=e.header||o.t("ns.common:resources.successText")}):(e.style="growl",e.status="success",e.close=!0,e.fade=!0,e.header=e.header||o.t("ns.common:resources.successText")),s.notify(e,n)},s.growlError=function(e,n){Array.isArray(e)?t.each(e,function(t,n){n.style="growl",n.status="error",n.close=!0,n.fade=!0,n.header=e.header||o.t("ns.common:resources.errorText")}):(e.style="growl",e.status="error",e.close=!0,e.fade=!0,e.header=e.header||o.t("ns.common:resources.errorText")),s.notify(e,n)},s.growlRestError=function(t,e,n){var o;t.errors&&t.errors.length>0&&(t.errors[0].message&&(e.message=t.errors[0].message),t.errors[0].errorCode&&(o=t.errors[0].errorCode)),e.code=t.errorCode||o||" ",s.growlError(e,n)},s.inlineError=function(e,n){Array.isArray(e)?t.each(e,function(t,e){e.style="inline",e.status="error",e.close=!1,e.fade=!1}):(e.style="inline",e.status="error",e.close=!1,e.fade=!1),s.notify(e,n)},s.inlineConfirm=function(e,n){Array.isArray(e)?t.each(e,function(t,e){e.style="inline",e.status="confirm",e.curtain=!0,e.close=!1,e.fade=!1}):(e.style="inline",e.status="confirm",e.curtain=!0,e.close=!1,e.fade=!1),s.notify(e,n)},s.growlInfo=function(e,n){Array.isArray(e)?t.each(e,function(t,e){e.style="growl",e.status="info",e.close=!0,e.fade=!0,e.header=this.header||o.t("ns.common:resources.warningText")}):(e.style="growl",e.status="info",e.close=!0,e.fade=!0,e.header=this.header||o.t("ns.common:resources.warningText")),s.notify(e,n)},s.okCancel=function(t,e){t.style="inline",t.status="confirm",t.curtain=!0,t.close?t.actionOptionsFocus=1:t.close=!1,t.fade=!1,t.actionOptions=[{actionOption1:[{text:t.okButtonText||o.t("ns.common:resources.okText"),classes:this.PRIMARY_BUTTON_CLASS,callback:t.okCallback}],actionOption2:[{text:t.cancelButtonText||o.t("ns.common:resources.cancelText"),classes:this.BUTTON_CLASS,callback:t.cancelCallback}]}],s.notify(t,e)},s.continueConfirm=function(t,e){t.style="inline",t.status="confirm",t.curtain=!0,t.close=!1,t.fade=!1,t.actionOptions=[{actionOption1:[{text:o.t("ns.common:resources.continueText"),action:"",classes:"btn cc-btn-primary"}]}],s.notify(t,e)},s.unsavedChangesConfirm=function(t,e){t.header=o.t("ns.common:resources.unsavedChangesHeaderText"),t.message=o.t("ns.common:resources.unsavedChangesMsgText"),t.okButtonText=t.okButtonText||o.t("ns.common:resources.saveChangesText"),t.cancelButtonText=o.t("ns.common:resources.discardChangesText"),t.okCallback=t.okCallback||t.saveCallback,t.cancelCallback=t.cancelCallback||t.discardCallback,s.okCancel(t,e)},s.clearNotifications=function(e){0!==t(e).find(".cc-notification").length&&t(e).find(".cc-notification").remove()},s.emptyNotifications=function(e){t(e).empty()},s.emptyGrowlMessages=function(){t(".cc-notification-growl").remove()},s.notifyID=function(t){var e="cc-notification-"+t+"-";return e+r},s.notifyBuild=function(a){var r,l,f,d="alert cc-notification ",u="",p="",m="",h="",y=0,v="",b=0,g="",T=!1;if(t("#cc-notification-aria-message").remove(),d+="cc-notification-"+a.style+" ",a.status&&""!==a.status&&(d+="alert-"+a.status),f=a.customNotificationID&&""!==a.customNotificationID?a.customNotificationID:s.notifyID(a.style),r=t("<div />").attr({id:f,class:d}),a.close&&t(r).append(s.CLOSE_BUTTON_HTML),a.header&&(t(r).append(t("<div />").attr({class:"cc-notification-header"}).html(t("<div />").text(a.header).html())),v+=a.header+" "),a.message&&(g="cc-notification-message"+(a.header?"":" cc-notification-message-only"),"string"!=typeof a.message?t.each(a.message,function(e,n){t(r).append(t("<div />").attr("class",g).html(t("<div />").text(n).html())),v+=n}):(t(r).append(t("<div />").attr("class",g).html(t("<div />").text(a.message).html())),v+=a.message)),a.template){var C=s.parseTemplateUrl(a.template),x=t("<div/>").attr("data-bind",'template: {name: "'+C.name+'", templateUrl: "'+C.url+'"}');t(r).append(x),e.applyBindings(a.templateData,x.get(0))}if(a.actionOptions&&(T=s.hasCallbacks(a.actionOptions[0]),l=t("<div />").attr("class","cc-notification-actions"),"inline"===a.style&&a.curtain===!0&&(t(r).addClass("cc-notification-with-curtain"),p="$('.cc-curtain').remove();",m="$(this).closest('.cc-notification-inline').remove();$('body').removeClass('no-scroll');",m+="if($('.cc-notification-outer').length > 0) {$('.cc-notification-outer').remove();}",a.modal===!0&&t(a.id).parent(".modal").on("hidden",function(){t(".cc-curtain").remove()})),t.each(a.actionOptions[0],function(e,n){h="",n[0].onCloseFocus&&(h="$('"+n[0].onCloseFocus+"').notificationsSetFocus();");var o="";n[0].readerText&&(o=n[0].readerText),T?t(l).append(t("<button />").attr({id:"cc-notification-actionbutton-"+e,class:"cc-notification-actionbutton-class "+n[0].classes}).attr("data-bind","makeAccess: {readerText: "+o+"}").text(n[0].text)):t(l).append(t("<button />").attr({class:n[0].classes,onClick:m+p+h+n[0].action}).attr("data-bind","makeAccess: {readerText: "+o+"}").text(n[0].text))}),t(r).append(l)),a.formErrors){var k,O,A=t("<div />").attr("class","cc-notification-errorFields").append(t("<ul />"));t.each(a.formErrors,function(e,n){u="$('#"+n.formId+"').notificationsSetFocus()",a.focusFunction?A.append(t("<li />").append(t("<a />").attr({href:"javascript:void(0);"}).text(n.label).on("click",function(){a.focusFunction(n.formId)}))):1===t("#"+n.formId).parents(".tab-pane").length?(O=t("#"+n.formId).parents(".tab-pane"),1===t("#"+O[0].id).closest(".modal").length?k=t("#"+O[0].id).closest(".modal").find(".cc-alta-nav-tabs a[href='#"+O[0].id+"']").parent():(k=t("#tab-"+O[0].id),0===k.length&&(k=t("#"+O[0].id).closest(".panel").find(".cc-alta-nav-tabs a[href='#"+O[0].id+"']").parent())),A.append(t("<li />").append(t("<a />").attr({href:"javascript:void(0);",onClick:"$('#"+k[0].id+" a').tab('show');$('#"+n.formId+"').notificationsSetFocus()"}).text(n.label)))):A.append(t("<li />").append(t("<a />").attr({href:"javascript:void(0);",onClick:"$('#"+n.formId+"').notificationsSetFocus()"}).text(n.label))),v+=" "+n.label}),t(r).append(A)}if(s.publishAccessibleMessages){var w="error"===a.status||"danger"===a.status||"confirm"===a.status;t.Topic(i.topicNames.ARIA_ANNOUNCEMENT_REQUESTED).publish(v,w)}else t("body").prepend(t("<div />").attr({id:"cc-notification-aria-message",class:"cc-reader-text",role:"alert","aria-relevant":"additions removals","aria-live":"assertive"}).text(v));if(a.code){var I=o.t("ns.common:resources.returnCodeLabel");t(r).append(t("<div />").attr({class:"cc-notification-errorCode"}).text(I+": "+a.code))}if("inline"==a.style?a.curtain===!0?(t(r).addClass("cc-inline-curtain"),c=t("<div />").attr({class:"cc-notification-outer"}),t(a.id).prepend(t(c).append(t(r)))):t(a.id).hasClass("oj-tabs")?t(a.id).children("div").each(function(){t(this).prepend(t(r).clone(!0))}):t(a.id).prepend(t(r)):"growl"==a.style&&(t("body").append(t(r)),s.notifyTop(),t(r).bind("closed",function(){setTimeout(function(){s.notifyTop()},100);s.notifyFocus()})),t(".cc-notification-close").on("click",function(){var e=t(".cc-notification-outer");if(t("body").hasClass("no-scroll")&&t("body").removeClass("no-scroll"),t(".cc-curtain")&&t(".cc-curtain").remove(),e){var n=e.parent();t(".cc-notification-outer").remove(),t(n).find(":tabbable").first().focus()}a.closeHandler&&a.closeHandler()}),T&&t.each(a.actionOptions[0],function(e,n){var o=t("#cc-notification-actionbutton-"+e);o&&o.on("click",function(){"inline"===a.style&&a.curtain===!0&&(t(this).closest(".cc-notification-inline").remove(),t(this).closest(".cc-notification-growl").remove(),t("body").removeClass("no-scroll"),t(".cc-notification-outer").length>0&&t(".cc-notification-outer").remove(),t(".cc-curtain").remove()),n[0].onCloseFocus&&t(n[0].onCloseFocus).notificationsSetFocus(),s.cleanUp(),n[0].callback&&n[0].callback()})}),a.fade!==!1){var F=n.NOTIFICATION_FADE_DEFAULT;a.fade!==!0&&(F=a.fade);var N=n.NOTIFICATION_DELAY_DEFAULT;a.delay&&(N=a.delay),t(r).delay(N).fadeOut(F,s.doFade),t(r).mouseenter(function(){t(this).stop(!0,!0)}),t(r).mouseleave(function(){t(this).fadeOut(F,s.doFade)})}a.curtain===!0&&("inline"===a.style?0!==t(a.id).parents(".modal-content").length?t(a.id).parents(".modal-content").append(t("<div />").attr("class","cc-curtain fade in")):(t(a.id).append(t("<div />").attr("class","cc-curtain fade in").attr("style","z-index:1042")),window.scrollTo(0,t(a.id).offset().top),window.setTimeout(function(){t("body").addClass("no-scroll")},0)):t("body").append(t("<div />").attr("class","modal-backdrop fade in")),b=t(".cc-notification-with-curtain :tabbable"),y=b.length,b.each(function(e){t(this).on("keydown",function(e){if(9===e.keyCode){var n;e.shiftKey?(n=parseInt(b.index(t(this)),10)-1,n<0&&(e.preventDefault(),b[y-1].focus())):(n=parseInt(b.index(t(this)),10)+1,n===y&&(e.preventDefault(),b[0].focus()))}})}),a.actionOptionsFocus?t(b[a.actionOptionsFocus]).focus():t(b[0]).focus())},s.doFade=function(){t(this).remove(),t("#notification-info").text("");setTimeout(function(){s.notifyTop()},100);s.notifyFocus()},s.notifyTop=function(){a=t("body").children(".cc-notification-growl"),a.length>=0&&t.each(a,function(e,n){e>0&&(l+=30),t(n).css("top",l),l+=t(n).height()}),l=65},s.notifyFocus=function(){t("#CC-Oracle-Nav UL.nav.nav-pills LI A:first").focus()},s.parseTemplateUrl=function(t){for(""!==infuser.defaults.templateSuffix&&t.indexOf(".")>=0&&(t=t.substring(0,t.lastIndexOf(".")));0===t.indexOf("/");)t=t.substring(1);return{url:t.substring(0,t.lastIndexOf("/")),name:t.substring(t.lastIndexOf("/")+1)}},s.cleanUp=function(){var e=t(".cc-notification-actionbutton-class");e&&e.off("click");var n=t(".cc-notification-close");n&&n.off("click")},s.hasCallbacks=function(e){var n=!1;return t.each(e,function(t,e){e[0].callback&&(n=!0)}),n},s.overlayId="#cc-overlay-clone",s.createNotificationOverlay=function(){var e=t('div[id$="_layer_overlay"]');if(e){var n=e.clone();n.attr("id","cc-overlay-clone"),n.css("opacity","1"),n.css("background","none"),t("#__oj_zorder_container").append(n),n.zIndex(n.zIndex()+1)}},s.destroyNotificationOverlay=function(){var e=t("#cc-overlay-clone");e&&e.length>0&&e.remove()}}return t.fn.notificationsSetFocus=function(){this.is(":visible")?this.focus():this.triggerHandler("focus"),this.data&&this.data().select2&&this.select2("open")},a.prototype.PRIMARY_BUTTON_CLASS="btn cc-btn-primary pull-right",a.prototype.DEFAULT_BUTTON_CLASS="btn btn-default",a.prototype.BUTTON_CLASS="btn",new a});
//# sourceMappingURL=notifications-1.0.js.map