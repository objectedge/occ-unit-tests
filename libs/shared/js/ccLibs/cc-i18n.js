define("CCi18n",["i18next","i18nextBackend","pubsub","ccDate","ccRestClient","ccConstants"],function(e,t,n,i,o,r){"use strict";function s(){var e,t,n,i=[];if(this.languageSet=!1,this.languageSetComplete=!1,this.initialized=!1,this.initComplete=!1,this.localeDeferred=$.Deferred(),this.initDeferred=$.Deferred(),t=$(":root").attr("lang")){var o=t.replace("-","_").split("_");o=this.normalizeLocale(o),e=o.join("-")}if(n=$(":root").data("accepted-langs")){for(var r=n.split(","),s=!1,a=0;a<r.length;a++){var l=r[a].replace("_","-");l=l.replace("_#",""),l!==t&&("zh-CN"===l&&(l="zh-Hans"),"zh-TW"===l&&(l="zh-Hant"),i.push(l),"en"===l&&(s=!0))}s||i.push("en")}this.i18nOptions={lng:e,compatibilityJSON:"v1",compatibilityAPI:"v1",preload:["en"],fallbackLng:i.length>1?i:"en",ns:["ns.common","ns.ccformats"],defaultNs:["ns.common"],contextSeparator:":",debug:!1,useLocalStorage:!1,useCookie:!1}}return s.prototype.normalizeLocale=function(e){return 3==e.length&&""===e[1]&&(e.splice(1,1),e[1]=e[1].replace("#","")),"zh"===e[0]&&"CN"===e[1]&&(e[1]="Hans"),"zh"===e[0]&&"TW"===e[1]&&(e[1]="Hant"),e},s.prototype.init=function(i,o){this.initialized=!0;var r=this;e.use(t).init(i,function(e){r.initComplete=!0,o&&o.apply(e),$.Topic(n.topicNames.LOCALE_READY).publish(e)})},s.prototype.deferInit=function(i,o){return this.initDeferred.done(function(r,s){$.extend(i,r),e.use(t).init(i,function(e){o&&o.apply(e),s&&s.apply(e),$.Topic(n.topicNames.LOCALE_READY).publish(e)})}),this.initDeferred.promise()},s.prototype.loadNamespace=function(t,n,i){e.loadNamespaces("ns."+t,function(){var o=n;n?o.returnObjectTrees=!0:o={returnObjectTrees:!0};var r=e.t("ns."+t+":resources",o);i(r)})},s.prototype.t=e.t.bind(e),s.prototype.addResourceBundle=function(t,n,i,o,r){e.addResourceBundle(t,n,i,o,r)},s.prototype.setLocale=function(t,o){var r=function(r){i.init(t),t!==e.lng()&&e.setLng(t,function(e){$.Topic(n.topicNames.LOCALE_SET).publish(t),o&&o.apply(e)})};this.initialized||this.initDeferred.isResolved?r():(this.initDeferred.resolve({fallbackLng:t,lng:t},o),this.localeDeferred.done(r))},s.prototype.setLocaleOnce=function(e,t){var n=e.replace("-","_").split("_");if("zh"===n[0]&&(n=this.normalizeLocale(n),e=n.join("-")),this.languageSet)this.languageSetComplete?t&&t.call(this):this.localeDeferred.done(t);else{var i=this;this.setLocale(e,function(e){t&&t.apply(this,e),i.languageSetComplete=!0,i.localeDeferred.resolve()}),this.languageSet=!0}},s.prototype.loadResources=function(e,t,n,i){var s={};s.locale=e;var a=function(e){if(e.hasOwnProperty(r.RESOURCES_KEY)){var t={};t.resources=e[r.RESOURCES_KEY],i(null,t)}else l(e)},l=function(e){o.commonErrorCallback(e,e.status),e.hasOwnProperty(r.ERRORS_KEY)&&i(e[r.ERRORS_KEY],null)};o.request(r.ENDPOINT_RESOURCES_GET_BUNDLE,s,a,l,t)},s.prototype.getLanguagesToResolveHierarchy=function(t){var n=e.services.languageUtils.toResolveHierarchy(t);return n},s.prototype.ajax=function(e,t,n){var i=e.match(/\/(ns\..*)\?locale=(.*)/),s=i[1],a=i[2],l={};l.locale=a;var c=function(e){if(e.hasOwnProperty(r.RESOURCES_KEY)){var t={};t.resources=e[r.RESOURCES_KEY],n(JSON.stringify(t),{status:200})}else p(e)},p=function(e){o.commonErrorCallback(e,e.status),e.hasOwnProperty(r.ERRORS_KEY)&&n(e[r.ERRORS_KEY],{status:e.status})};o.request(r.ENDPOINT_RESOURCES_GET_BUNDLE,l,c,p,s)},s.prototype.disableNestedLookups=function(){this.reusePrefix=e.options.reusePrefix,e.options.reusePrefix="DISABLE_NESTED_LOOKUPS"},s.prototype.enableNestedLookups=function(){e.options.reusePrefix=this.reusePrefix},new s});
//# sourceMappingURL=cc-i18n.js.map