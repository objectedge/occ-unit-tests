define("storeKoExtensions",["knockout","jqueryui","notifier","ccLogger","koValidate"],function(e,r,i,a,l){"use strict";e.extenders.notify=function(r,l){if(r.isValid&&e.isObservable(r.isValid)&&r.isModified&&e.isObservable(r.isModified)){var s="",t="An error has occurred.";if(l&&(l.id?(s=l.id,l.message&&(t=l.message)):""!==l.toString()&&(s=l.toString())),""===s)throw a.error("Notify ID not set"),new Error("Notify ID not set.");r.notify=function(e){r.isValid()||!r.isModified()?i.clearError(s):i.sendError(s,t)},r.clearError=function(){i.clearError(s)},r.isModified.subscribe(r.notify),r.isValid.subscribe(r.notify)}return r},e.bindingHandlers.productVariantImageSource={getNoImageSiteSetting:function(r){for(var i=null,a=0;a<r.$parents.length;a++)if(e.isObservable(r.$parents[a].site)){i=e.unwrap(r.$parents[a].site().noImageSrc);break}return i},init:function(r,i,a,l,s){var t,n,u,m,o,c=e.utils.unwrapObservable(i());"object"==typeof c&&"IMG"===r.nodeName&&(t=e.utils.unwrapObservable(c.src),n=e.utils.unwrapObservable(c.errorSrc),u=e.bindingHandlers.productVariantImageSource.getNoImageSiteSetting(s),m=u&&u.length>0?u:n,t&&m&&(o=new Image,o.src=m))},update:function(r,i,a,l,s){var t,n,u,m,o,c,d,b,g,p,S,U=e.utils.unwrapObservable(i());if("object"==typeof U&&"IMG"===r.nodeName){if(m=e.utils.unwrapObservable(U.src),t=e.utils.unwrapObservable(U.imageType),t||(t="medium"),m)switch(t){case"full":u=e.utils.unwrapObservable(m.childSKUs&&m.childSKUs.length>0&&m.childSKUs[0].primaryFullImageURL?m.childSKUs[0].primaryFullImageURL:m.primaryFullImageURL);break;case"large":u=e.utils.unwrapObservable(m.childSKUs&&m.childSKUs.length>0&&m.childSKUs[0].primaryLargeImageURL?m.childSKUs[0].primaryLargeImageURL:m.primaryLargeImageURL);break;case"medium":u=e.utils.unwrapObservable(m.childSKUs&&m.childSKUs.length>0&&m.childSKUs[0].primaryMediumImageURL?m.childSKUs[0].primaryMediumImageURL:m.primaryMediumImageURL);break;case"small":u=e.utils.unwrapObservable(m.childSKUs&&m.childSKUs.length>0&&m.childSKUs[0].primarySmallImageURL?m.childSKUs[0].primarySmallImageURL:m.primarySmallImageURL);break;case"thumb":u=e.utils.unwrapObservable(m.childSKUs&&m.childSKUs.length>0&&m.childSKUs[0].primaryThumbImageURL?m.childSKUs[0].primaryThumbImageURL:m.primaryThumbImageURL);break;default:u=e.utils.unwrapObservable(m.childSKUs&&m.childSKUs.length>0&&m.childSKUs[0].primaryMediumImageURL?m.childSKUs[0].primaryMediumImageURL:m.primaryMediumImageURL)}else u=U.errorSrc;if(b=e.utils.unwrapObservable(m.primaryImageAltText),g=e.utils.unwrapObservable(m.primaryImageTitle),o=e.utils.unwrapObservable(U.errorSrc),c=e.bindingHandlers.productImageSource.getNoImageSiteSetting(s),d=c&&c.length>0?c:o,u!==o&&"/img/no-image.jpg"!==u||(u=d),c&&c.length>0){var h=new Image;h.onerror=function(){d=o},h.src=c}return b||(b=e.utils.unwrapObservable(U.alt)),g||(g=e.utils.unwrapObservable(U.title)),p=e.utils.unwrapObservable(U.errorAlt),S=e.utils.unwrapObservable(U.onerror),d?void(u?(n=new Image,n.onload=function(){r.src=u,b&&(r.alt=b),g&&(r.title=g)},n.onerror=function(){r.src=d,p&&(r.alt=p),S&&S(r)},n.src=u):(r.src=d,p?r.alt=p:b&&(r.alt=b),S&&S(r))):(r.src=u,void(b&&(r.alt=b)))}}}});
//# sourceMappingURL=store-ko-extensions.js.map